<!DOCTYPE html>
<html lang="bg">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>EV Log</title>
    
    <link rel="stylesheet" href="styles.css">
    
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#000000">
</head>
<body>

<div class="app-container">
    
    <div style="margin-bottom: 20px;">
        <h2 style="margin-bottom: 15px; padding-left: 5px;">My EV Log</h2>
        
        <nav class="nav-scroller">
            <button class="nav-btn" data-target="view-log">Log</button>
            <button class="nav-btn" data-target="view-costs">Costs</button>
            <button class="nav-btn active" data-target="view-compare">Compare</button>
            <button class="nav-btn" data-target="view-settings">Settings</button>
        </nav>
    </div>

    <div id="view-log" class="view-section" style="display: none;">
        <div class="card" style="background: #1e1e1e; padding: 20px; border-radius: 12px; text-align: center; color: #666;">
            <p>Тук ще бъде твоят дневник за зареждания.</p>
            <button class="btn btn-action" style="margin-top: 10px;">+ Add Entry</button>
        </div>
    </div>

    <div id="view-costs" class="view-section" style="display: none;">
        <div class="card" style="background: #1e1e1e; padding: 20px; border-radius: 12px; text-align: center; color: #666;">
            <p>Статистика за разходите.</p>
        </div>
    </div>

    <div id="view-compare" class="view-section">
        <div id="compare-container"></div>
    </div>

    <div id="view-settings" class="view-section" style="display: none;">
        <div class="card" style="background: #1e1e1e; padding: 20px; border-radius: 12px; text-align: center; color: #666;">
            <p>Настройки на приложението.</p>
        </div>
    </div>

</div>

<script src="calc.js"></script>
<script src="ui-compare.js"></script>

<script>
    document.addEventListener('DOMContentLoaded', () => {
        
        // 1. Инициализиране на Compare модула веднага
        if(typeof UICompare !== 'undefined') {
            UICompare.init();
        }

        // 2. Логика за смяна на табовете
        const buttons = document.querySelectorAll('.nav-btn');
        const views = document.querySelectorAll('.view-section');

        buttons.forEach(btn => {
            btn.addEventListener('click', () => {
                // Махаме 'active' от всички бутони
                buttons.forEach(b => b.classList.remove('active'));
                // Слагаме 'active' на натиснатия
                btn.classList.add('active');

                // Скриваме всички views
                views.forEach(v => v.style.display = 'none');
                
                // Показваме избрания
                const targetId = btn.getAttribute('data-target');
                document.getElementById(targetId).style.display = 'block';
            });
        });

    });
</script>

</body>
</html>
